#@data/values
---
hostname: node
domain: lab.shortrib.net # replace with your domain

remote_ovf_url: https://cloud-images.ubuntu.com/noble/current/noble-server-cloudimg-amd64.img

default_password: REDACTED # password for the default `ubuntu` user

ssh:
  authorized_keys:
  - REDACTED  # your SSH public key

cluster:
  controllers: 1
  workers: 2
  kubevip_cidr: 10.26.0.65/28

users:
    - default
    - name: REDACTED   # your preferred user name
      gecos: REDACETD  # your real name
      groups:
        - users
        - adm
        - sudo
        - ssher
      ssh_import_id:
        - gh:REDACTED   # your github username, assuming you use SSH with it
      sudo: ALL=(ALL) NOPASSWD:ALL
      lock_passwd: true

node:
  cpus: 4          # this is the minimum to pass the host check
  memory: 8192     # this is the minimum to pass the host check
  disk_size: 52    # this ist he minimum to pass the host check for Longhorn

# Nutanix Infrastructure Configuration
# Replace with your actual Nutanix environment details
nutanix:
  prism_central: prism.lab.shortrib.net  # Prism Central IP or FQDN
  username: admin                         # Prism Central username
  password: REDACTED                      # Will be SOPS-encrypted
  cluster: homelab                        # Nutanix cluster name
  storage_container: kubernetes           # Storage container for VMs
  subnets:
    kubernetes: Kubernetes                # Management network subnet
    workload: Workload                    # Workload network subnet

# MAC addresses for control plane nodes (for DHCP reservations)
# Number of MACs must match cluster.controllers count
control_plane_mac:
  - "50:6b:8d:00:00:01"  # First control plane node - configure DHCP reservation
  # - "50:6b:8d:00:00:02"  # Second control plane node (if controllers: 2)
  # - "50:6b:8d:00:00:03"  # Third control plane node (if controllers: 3)
