#@data/values
---
cluster_name: mycluster  # name for your Talos cluster
domain: lab.shortrib.net # replace with your domain

cluster_image_name: talos-1.9.4  # Talos ISO image name in Nutanix

cluster:
  controllers: 1
  workers: 2
  control_plane_cidr: 10.26.0.64/28
  control_plane_cidr_v6: ""  # Optional: e.g., "2600:4040:5c41:94b4::/64"
  load_balancer_cidr: 10.26.0.80/28
  load_balancer_cidr_v6: ""  # Optional: e.g., "2600:4040:5c41:94b4::0:0/112"

node:
  cpus: 4          # minimum recommended for Talos
  memory: 8192     # minimum recommended for Talos
  disk_size: 52    # disk size in GB

# Nutanix Infrastructure Configuration
# Replace with your actual Nutanix environment details
nutanix:
  prism_central: prism.lab.shortrib.net  # Prism Central IP or FQDN
  username: admin                         # Prism Central username
  password: REDACTED                      # Will be SOPS-encrypted
  cluster: homelab                        # Nutanix cluster name
  storage_container: kubernetes           # Storage container for VMs
  subnets:
    kubernetes: Kubernetes                # Management network subnet
    workload: Workload                    # Workload network subnet

# MAC addresses for control plane nodes (for DHCP reservations)
# Number of MACs must match cluster.controllers count
control_plane_mac:
  - "50:6b:8d:00:00:01"  # First control plane node - configure DHCP reservation
  # - "50:6b:8d:00:00:02"  # Second control plane node (if controllers: 2)
  # - "50:6b:8d:00:00:03"  # Third control plane node (if controllers: 3)

# ACME / cert-manager configuration
acme:
  email: you@example.com  # Email for certificate notifications

# Cloudflare configuration for DNS-01 challenges
cloudflare:
  api_token: REDACTED  # Will be SOPS-encrypted
